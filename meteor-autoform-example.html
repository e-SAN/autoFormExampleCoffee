<head>
  <title>meteor-autoform-example</title>
</head>

<body>
  {{> example testData}}
</body>

<template name="example">
  <div class="container">
    <h1>Meteor Autoform Example</h1>
    <div class="row" style="margin-bottom: 50px;">
      <div class="col-12 col-lg-8">
        {{#autoForm form=schema doc=selectedDoc id="docForm" type=docFormType}}
        <div class="formWrap">
          <div class="form-group {{#if afFieldIsInvalid name='requiredString'}}has-error{{/if}}">
            {{> afFieldLabel name='requiredString' autoform=this}}
            {{> afFieldInput name='requiredString' autoform=this autofocus='autofocus' placeholder="schemaLabel"}}
            {{#if afFieldIsInvalid name='requiredString'}}
            <span class="help-block">{{afFieldMessage name='requiredString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalString' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='optionalString' autoform=this}}
            {{> afFieldInput name='optionalString' autoform=this}}
            {{#if afFieldIsInvalid name='optionalString' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalString' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='labelString' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='labelString' autoform=this}}
            {{> afFieldInput name='labelString' placeholder="schemaLabel" autoform=this}}
            {{#if afFieldIsInvalid name='labelString' autoform=this}}
            <span class="help-block">{{afFieldMessage name='labelString' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='longString' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='longString' autoform=this}}
            {{> afFieldInput name='longString' rows="5" autoform=this}}
            {{#if afFieldIsInvalid name='longString' autoform=this}}
            <span class="help-block">{{afFieldMessage name='longString' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='maxString' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='maxString' autoform=this}}
            <span class="help-block">Allows a max of 10 characters, but optional</span>
            {{> afFieldInput name='maxString' autoform=this}}
            {{#if afFieldIsInvalid name='maxString' autoform=this}}
            <span class="help-block">{{afFieldMessage name='maxString' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='minString' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='minString' autoform=this}}
            <span class="help-block">Allows a min of 10 characters, but optional</span>
            {{> afFieldInput name='minString' autoform=this}}
            {{#if afFieldIsInvalid name='minString' autoform=this}}
            <span class="help-block">{{afFieldMessage name='minString' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='requiredBoolean' autoform=this}}has-error{{/if}}">
            {{> afFieldInput name='requiredBoolean' autoform=this}}
            {{#if afFieldIsInvalid name='requiredBoolean' autoform=this}}
            <span class="help-block">{{afFieldMessage name='requiredBoolean' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalBoolean' autoform=this}}has-error{{/if}}">
            {{> afFieldInput name='optionalBoolean' autoform=this}}
            {{#if afFieldIsInvalid name='optionalBoolean' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalBoolean' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='radioBoolean' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='radioBoolean' autoform=this}}
            {{> afFieldInput name='radioBoolean' radio="true" trueLabel="Yes" falseLabel="No" autoform=this}}
            {{#if afFieldIsInvalid name='radioBoolean' autoform=this}}
            <span class="help-block">{{afFieldMessage name='radioBoolean' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='selectBoolean' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='selectBoolean' autoform=this}}
            {{> afFieldInput name='selectBoolean' select="true" trueLabel="Yes" falseLabel="No" value="true" autoform=this}}
            {{#if afFieldIsInvalid name='selectBoolean' autoform=this}}
            <span class="help-block">{{afFieldMessage name='selectBoolean' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='requiredSelect' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='requiredSelect' autoform=this}}
            {{> afFieldInput name='requiredSelect' options=numSelectOptions autoform=this}}
            {{#if afFieldIsInvalid name='requiredSelect' autoform=this}}
            <span class="help-block">{{afFieldMessage name='requiredSelect' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalSelect' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='optionalSelect' autoform=this}}
            {{> afFieldInput name='optionalSelect' options="allowed" capitalize="true" autoform=this}}
            {{#if afFieldIsInvalid name='optionalSelect' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalSelect' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='firstOptionSelect' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='firstOptionSelect' autoform=this}}
            {{> afFieldInput name='firstOptionSelect' firstOption="(Select Something)" options=numSelectOptions autoform=this}}
            {{#if afFieldIsInvalid name='firstOptionSelect' autoform=this}}
            <span class="help-block">{{afFieldMessage name='firstOptionSelect' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='firstOptionRequiredSelect' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='firstOptionRequiredSelect' autoform=this}}
            {{> afFieldInput name='firstOptionRequiredSelect' firstOption="(Select Something)" options=numSelectOptions autoform=this}}
            {{#if afFieldIsInvalid name='firstOptionRequiredSelect' autoform=this}}
            <span class="help-block">{{afFieldMessage name='firstOptionRequiredSelect' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='maxSelect' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='maxSelect' autoform=this}}
            <span class="help-block">Select no more than two options</span>
            {{> afFieldInput name='maxSelect' options=numSelectOptions autoform=this}}
            {{#if afFieldIsInvalid name='maxSelect' autoform=this}}
            <span class="help-block">{{afFieldMessage name='maxSelect' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='minSelect' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='minSelect' autoform=this}}
            <span class="help-block">Select at least two options</span>
            {{> afFieldInput name='minSelect' options=numSelectOptions autoform=this}}
            {{#if afFieldIsInvalid name='minSelect' autoform=this}}
            <span class="help-block">{{afFieldMessage name='minSelect' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='requiredNumber' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='requiredNumber' autoform=this}}
            {{> afFieldInput name='requiredNumber' autoform=this}}
            {{#if afFieldIsInvalid name='requiredNumber' autoform=this}}
            <span class="help-block">{{afFieldMessage name='requiredNumber' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalNumber' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='optionalNumber' autoform=this}}
            {{> afFieldInput name='optionalNumber' autoform=this}}
            {{#if afFieldIsInvalid name='optionalNumber' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalNumber' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='maxNumber' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='maxNumber' autoform=this}}
            <span class="help-block">Enter a number less than 10</span>
            {{> afFieldInput name='maxNumber' autoform=this}}
            {{#if afFieldIsInvalid name='maxNumber' autoform=this}}
            <span class="help-block">{{afFieldMessage name='maxNumber' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='minNumber' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='minNumber' autoform=this}}
            <span class="help-block">Enter a number more than 10</span>
            {{> afFieldInput name='minNumber' autoform=this}}
            {{#if afFieldIsInvalid name='minNumber' autoform=this}}
            <span class="help-block">{{afFieldMessage name='minNumber' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='decimal' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='decimal' autoform=this}}
            <span class="help-block">Decimal number is OK</span>
            {{> afFieldInput name='decimal' step="0.01" autoform=this}}
            {{#if afFieldIsInvalid name='decimal' autoform=this}}
            <span class="help-block">{{afFieldMessage name='decimal' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='requiredDate' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='requiredDate' autoform=this}}
            {{> afFieldInput name='requiredDate' autoform=this}}
            {{#if afFieldIsInvalid name='requiredDate' autoform=this}}
            <span class="help-block">{{afFieldMessage name='requiredDate' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalDate' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='optionalDate' autoform=this}}
            {{> afFieldInput name='optionalDate' autoform=this}}
            {{#if afFieldIsInvalid name='optionalDate' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalDate' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='minDate' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='minDate' autoform=this}}
            <span class="help-block">Enter a date on or after 1 January 2013</span>
            {{> afFieldInput name='minDate' autoform=this}}
            {{#if afFieldIsInvalid name='minDate' autoform=this}}
            <span class="help-block">{{afFieldMessage name='minDate' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='maxDate' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='maxDate' autoform=this}}
            <span class="help-block">Enter a date on or before 31 December 2012</span>
            {{> afFieldInput name='maxDate' autoform=this}}
            {{#if afFieldIsInvalid name='maxDate' autoform=this}}
            <span class="help-block">{{afFieldMessage name='maxDate' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='requiredEmail' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='requiredEmail' autoform=this}}
            {{> afFieldInput name='requiredEmail' autoform=this}}
            {{#if afFieldIsInvalid name='requiredEmail' autoform=this}}
            <span class="help-block">{{afFieldMessage name='requiredEmail' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalEmail' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='optionalEmail' autoform=this}}
            {{> afFieldInput name='optionalEmail' autoform=this}}
            {{#if afFieldIsInvalid name='optionalEmail' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalEmail' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='requiredUrl' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='requiredUrl' autoform=this}}
            {{> afFieldInput name='requiredUrl' autoform=this}}
            {{#if afFieldIsInvalid name='requiredUrl' autoform=this}}
            <span class="help-block">{{afFieldMessage name='requiredUrl' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='optionalUrl' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='optionalUrl' autoform=this}}
            {{> afFieldInput name='optionalUrl' autoform=this}}
            {{#if afFieldIsInvalid name='optionalUrl' autoform=this}}
            <span class="help-block">{{afFieldMessage name='optionalUrl' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='a.b.c' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='a.b.c' autoform=this}}
            {{> afFieldInput name='a.b.c' autoform=this}}
            {{#if afFieldIsInvalid name='a.b.c' autoform=this}}
            <span class="help-block">{{afFieldMessage name='a.b.c' autoform=this}}</span>
            {{/if}}
          </div>
          <div class="form-group {{#if afFieldIsInvalid name='arrayOfObjects.0.name' autoform=this}}has-error{{/if}}">
            {{> afFieldLabel name='arrayOfObjects.0.name' autoform=this}}
            {{> afFieldInput name='arrayOfObjects.0.name' autoform=this}}
            {{#if afFieldIsInvalid name='arrayOfObjects.0.name' autoform=this}}
            <span class="help-block">{{afFieldMessage name='arrayOfObjects.0.name' autoform=this}}</span>
            {{/if}}
          </div>
        </div>
        <button type="submit" class="btn btn-primary">{{#if newDocMode}}Insert{{else}}Update{{/if}}</button>
        <button type="reset" class="btn btn-default">Reset</button>
        {{/autoForm}}
        <h2>Virtual Field Test</h2>
        {{> virtualFields}}
        <h2>Contact Form Test</h2>
        {{> contactForm}}
        <h2>Normal Submit Form</h2>
        {{> normalSubmitForm}}
        <h2>Quick Form Test</h2>
        <div class="formWrap">
          {{> quickForm form=schema validation="keyup" type="disabled" id="myQuickForm" buttonClasses="btn btn-primary" novalidate="novalidate"}}
        </div>
        <h2>Dates Test</h2>
        {{> datesForm}}
      </div>
      <div class="col-12 col-lg-4">
        {{> docTable}}
      </div>
    </div>
  </div>
</template>

<template name="docTable">
  <table class="table table-bordered table-striped table-hover">
    <tbody>
      <tr>
        <td><button type="button" class="btn-link docClear">New Document</button></td>
        <td></td>
      </tr>
      {{#each documents}}
      <tr>
        <td><button type="button" class="btn-link docSelect">{{requiredString}}</button></td>
        <td>
          {{#autoForm form='Documents' doc=this type="remove"}}
          <button type="submit" class="btn btn-primary">Delete</button>
          {{/autoForm}}
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="virtualFields">
  {{#autoForm form='PersonsForm' validation="keyup" id="personsForm" type="insert"}}
  <fieldset>
    <legend>Add a Person</legend>
    <div class="form-group {{#if afFieldIsInvalid name='firstName' autoform=this}}has-error{{/if}}">
      {{> afFieldLabel name='firstName' autoform=this}}
      {{> afFieldInput name='firstName' autoform=this}}
      {{#if afFieldIsInvalid name='firstName' autoform=this}}
      <span class="help-block">{{afFieldMessage name='firstName' autoform=this}}</span>
      {{/if}}
    </div>
    <div class="form-group {{#if afFieldIsInvalid name='lastName' autoform=this}}has-error{{/if}}">
      {{> afFieldLabel name='lastName' autoform=this}}
      {{> afFieldInput name='lastName' autoform=this}}
      {{#if afFieldIsInvalid name='lastName' autoform=this}}
      <span class="help-block">{{afFieldMessage name='lastName' autoform=this}}</span>
      {{/if}}
    </div>
  </fieldset>
  <button type="submit" class="btn btn-primary">Insert</button>
  {{/autoForm}}
  <table class="table table-bordered table-striped table-hover" style="margin: 25px 0;">
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Full Name (virtual)</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each persons}}
      <tr>
        <td>{{firstName}}</td>
        <td>{{lastName}}</td>
        <td>{{fullName}}</td>
        <td>
          {{#autoForm form='PersonsForm' type="remove" doc=this}}
          <button type="submit" class="btn btn-primary">Delete</button>
          {{/autoForm}}
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="contactForm">
  {{#autoForm form="ContactForm" id="contactForm" type="method" meteormethod="sendEmail"}}
  <fieldset>
    <legend>Contact Us</legend>
    <div class="form-group {{#if afFieldIsInvalid name='name' autoform=this}}has-error{{/if}}">
      {{> afFieldLabel name="name" autoform=this}}
      {{> afFieldInput name="name" autoform=this}}
      {{#if afFieldIsInvalid name="name" autoform=this}}
      <span class="help-block">{{afFieldMessage name="name" autoform=this}}</span>
      {{/if}}
    </div>
    <div class="form-group {{#if afFieldIsInvalid name='email' autoform=this}}has-error{{/if}}">
      {{> afFieldLabel name="email" autoform=this}}
      {{> afFieldInput name="email" autoform=this}}
      {{#if afFieldIsInvalid name="email" autoform=this}}
      <span class="help-block">{{afFieldMessage name="email" autoform=this}}</span>
      {{/if}}
    </div>
    <div class="form-group {{#if afFieldIsInvalid name='message' autoform=this}}has-error{{/if}}">
      {{> afFieldLabel name="message" autoform=this}}
      {{> afFieldInput name="message" rows="10" autoform=this}}
      {{#if afFieldIsInvalid name="message" autoform=this}}
      <span class="help-block">{{afFieldMessage name="message" autoform=this}}</span>
      {{/if}}
    </div>
    <div>
      <button type="submit" class="btn btn-primary">Submit</button>
      <button type="reset" class="btn btn-default">Reset</button>
    </div>
  </fieldset>
  {{/autoForm}}
</template>

<template name="normalSubmitForm">
  {{#autoForm form="ContactForm" id="contactForm2" action="/fake" method="post"}}
  <fieldset>
    <legend>Contact Us</legend>
    {{> afQuickField name="name" label=false placeholder="schemaLabel" autoform=this}}
    {{> afQuickField name="email" label=false placeholder="schemaLabel" autoform=this}}
    {{> afQuickField name="message" label=false placeholder="schemaLabel" rows="10" autoform=this}}
    <div>
      <button type="submit" class="btn btn-primary">Submit</button>
      <button type="reset" class="btn btn-default">Reset</button>
    </div>
  </fieldset>
  {{/autoForm}}
</template>

<template name="datesForm">
  {{#autoForm form="DatesForm" type="insert" doc=dateDoc id="datesForm1"}}
  {{> afQuickField name="date" value=today autoform=this}}
  <div>
    <button type="submit" class="btn btn-primary">Insert</button>
  </div>
  {{/autoForm}}
  {{#autoForm form="DatesForm" type="insert" doc=dateTimeDoc id="datesForm2"}}
  {{> afQuickField name="dateTime" type="datetime" autoform=this}}
  <div>
    <button type="submit" class="btn btn-primary">Insert</button>
  </div>
  {{/autoForm}}
  {{#autoForm form="DatesForm" type="insert" doc=dateTimeLocalDoc id="datesForm3"}}
  {{> afQuickField name="dateTimeLocal" type="datetime-local" offset="-0100" autoform=this}}
  <div>
    <button type="submit" class="btn btn-primary">Insert</button>
  </div>
  {{/autoForm}}
</template>