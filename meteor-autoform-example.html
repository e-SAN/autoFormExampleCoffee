<head>
  <title>meteor-autoform-example</title>
</head>

<body>
  {{> example}}
</body>

<template name="example">
  <div class="container">
    <h1>Meteor Autoform Example</h1>
    <div class="row" style="margin-bottom: 50px;">
      <div class="col-12 col-lg-8">
        {{#autoForm schema=schema doc=selectedDoc id="docForm" novalidate="novalidate"}}
        <div class="formWrap">
          <div class="form-group {{afHasError 'requiredString'}}">
            {{afFieldLabel 'requiredString'}}
            {{afFieldInput 'requiredString' autofocus='autofocus' placeholder="schemaLabel"}}
            {{#if afFieldIsInvalid 'requiredString'}}
            <span class="help-block">{{afFieldMessage 'requiredString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalString'}}">
            {{afFieldLabel 'optionalString'}}
            {{afFieldInput 'optionalString'}}
            {{#if afFieldIsInvalid 'optionalString'}}
            <span class="help-block">{{afFieldMessage 'optionalString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'labelString'}}">
            {{afFieldLabel 'labelString'}}
            {{afFieldInput 'labelString' placeholder="schemaLabel"}}
            {{#if afFieldIsInvalid 'labelString'}}
            <span class="help-block">{{afFieldMessage 'labelString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'longString'}}">
            {{afFieldLabel 'longString'}}
            {{afFieldInput 'longString' rows="5"}}
            {{#if afFieldIsInvalid 'longString'}}
            <span class="help-block">{{afFieldMessage 'longString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'maxString'}}">
            {{afFieldLabel 'maxString'}}
            <span class="help-block">Allows a max of 10 characters, but optional</span>
            {{afFieldInput 'maxString'}}
            {{#if afFieldIsInvalid 'maxString'}}
            <span class="help-block">{{afFieldMessage 'maxString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'minString'}}">
            {{afFieldLabel 'minString'}}
            <span class="help-block">Allows a min of 10 characters, but optional</span>
            {{afFieldInput 'minString'}}
            {{#if afFieldIsInvalid 'minString'}}
            <span class="help-block">{{afFieldMessage 'minString'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'requiredBoolean'}}">
            {{afFieldInput 'requiredBoolean'}}
            {{#if afFieldIsInvalid 'requiredBoolean'}}
            <span class="help-block">{{afFieldMessage 'requiredBoolean'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalBoolean'}}">
            {{afFieldInput 'optionalBoolean'}}
            {{#if afFieldIsInvalid 'optionalBoolean'}}
            <span class="help-block">{{afFieldMessage 'optionalBoolean'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'radioBoolean'}}">
            {{afFieldLabel 'radioBoolean'}}
            {{afFieldInput 'radioBoolean' radio="true" trueLabel="Yes" falseLabel="No"}}
            {{#if afFieldIsInvalid 'radioBoolean'}}
            <span class="help-block">{{afFieldMessage 'radioBoolean'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'selectBoolean'}}">
            {{afFieldLabel 'selectBoolean'}}
            {{afFieldInput 'selectBoolean' select="true" trueLabel="Yes" falseLabel="No"}}
            {{#if afFieldIsInvalid 'selectBoolean'}}
            <span class="help-block">{{afFieldMessage 'selectBoolean'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'requiredSelect'}}">
            {{afFieldLabel 'requiredSelect'}}
            {{afFieldInput 'requiredSelect' options=numSelectOptions}}
            {{#if afFieldIsInvalid 'requiredSelect'}}
            <span class="help-block">{{afFieldMessage 'requiredSelect'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalSelect'}}">
            {{afFieldLabel 'optionalSelect'}}
            {{afFieldInput 'optionalSelect' options="allowed" capitalize="true"}}
            {{#if afFieldIsInvalid 'optionalSelect'}}
            <span class="help-block">{{afFieldMessage 'optionalSelect'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'firstOptionSelect'}}">
            {{afFieldLabel 'firstOptionSelect'}}
            {{afFieldInput 'firstOptionSelect' firstOption="(Select Something)" options=numSelectOptions}}
            {{#if afFieldIsInvalid 'firstOptionSelect'}}
            <span class="help-block">{{afFieldMessage 'firstOptionSelect'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'firstOptionRequiredSelect'}}">
            {{afFieldLabel 'firstOptionRequiredSelect'}}
            {{afFieldInput 'firstOptionRequiredSelect' firstOption="(Select Something)" options=numSelectOptions}}
            {{#if afFieldIsInvalid 'firstOptionRequiredSelect'}}
            <span class="help-block">{{afFieldMessage 'firstOptionRequiredSelect'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'maxSelect'}}">
            {{afFieldLabel 'maxSelect'}}
            <span class="help-block">Select no more than two options</span>
            {{afFieldInput 'maxSelect' options=numSelectOptions}}
            {{#if afFieldIsInvalid 'maxSelect'}}
            <span class="help-block">{{afFieldMessage 'maxSelect'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'minSelect'}}">
            {{afFieldLabel 'minSelect'}}
            <span class="help-block">Select at least two options</span>
            {{afFieldInput 'minSelect' options=numSelectOptions}}
            {{#if afFieldIsInvalid 'minSelect'}}
            <span class="help-block">{{afFieldMessage 'minSelect'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'requiredNumber'}}">
            {{afFieldLabel 'requiredNumber'}}
            {{afFieldInput 'requiredNumber'}}
            {{#if afFieldIsInvalid 'requiredNumber'}}
            <span class="help-block">{{afFieldMessage 'requiredNumber'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalNumber'}}">
            {{afFieldLabel 'optionalNumber'}}
            {{afFieldInput 'optionalNumber'}}
            {{#if afFieldIsInvalid 'optionalNumber'}}
            <span class="help-block">{{afFieldMessage 'optionalNumber'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'maxNumber'}}">
            {{afFieldLabel 'maxNumber'}}
            <span class="help-block">Enter a number less than 10</span>
            {{afFieldInput 'maxNumber'}}
            {{#if afFieldIsInvalid 'maxNumber'}}
            <span class="help-block">{{afFieldMessage 'maxNumber'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'minNumber'}}">
            {{afFieldLabel 'minNumber'}}
            <span class="help-block">Enter a number more than 10</span>
            {{afFieldInput 'minNumber'}}
            {{#if afFieldIsInvalid 'minNumber'}}
            <span class="help-block">{{afFieldMessage 'minNumber'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'decimal'}}">
            {{afFieldLabel 'decimal'}}
            <span class="help-block">Decimal number is OK</span>
            {{afFieldInput 'decimal' step="0.01"}}
            {{#if afFieldIsInvalid 'decimal'}}
            <span class="help-block">{{afFieldMessage 'decimal'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'requiredDate'}}">
            {{afFieldLabel 'requiredDate'}}
            {{afFieldInput 'requiredDate'}}
            {{#if afFieldIsInvalid 'requiredDate'}}
            <span class="help-block">{{afFieldMessage 'requiredDate'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalDate'}}">
            {{afFieldLabel 'optionalDate'}}
            {{afFieldInput 'optionalDate'}}
            {{#if afFieldIsInvalid 'optionalDate'}}
            <span class="help-block">{{afFieldMessage 'optionalDate'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'minDate'}}">
            {{afFieldLabel 'minDate'}}
            <span class="help-block">Enter a date on or after 1 January 2013</span>
            {{afFieldInput 'minDate'}}
            {{#if afFieldIsInvalid 'minDate'}}
            <span class="help-block">{{afFieldMessage 'minDate'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'maxDate'}}">
            {{afFieldLabel 'maxDate'}}
            <span class="help-block">Enter a date on or before 31 December 2012</span>
            {{afFieldInput 'maxDate'}}
            {{#if afFieldIsInvalid 'maxDate'}}
            <span class="help-block">{{afFieldMessage 'maxDate'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'requiredEmail'}}">
            {{afFieldLabel 'requiredEmail'}}
            {{afFieldInput 'requiredEmail'}}
            {{#if afFieldIsInvalid 'requiredEmail'}}
            <span class="help-block">{{afFieldMessage 'requiredEmail'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalString'}}">
            {{afFieldLabel 'optionalEmail'}}
            {{afFieldInput 'optionalEmail'}}
            {{#if afFieldIsInvalid 'optionalEmail'}}
            <span class="help-block">{{afFieldMessage 'optionalEmail'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'requiredUrl'}}">
            {{afFieldLabel 'requiredUrl'}}
            {{afFieldInput 'requiredUrl'}}
            {{#if afFieldIsInvalid 'requiredUrl'}}
            <span class="help-block">{{afFieldMessage 'requiredUrl'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'optionalUrl'}}">
            {{afFieldLabel 'optionalUrl'}}
            {{afFieldInput 'optionalUrl'}}
            {{#if afFieldIsInvalid 'optionalUrl'}}
            <span class="help-block">{{afFieldMessage 'optionalUrl'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'a.b.c'}}">
            {{afFieldLabel 'a.b.c'}}
            {{afFieldInput 'a.b.c'}}
            {{#if afFieldIsInvalid 'a.b.c'}}
            <span class="help-block">{{afFieldMessage 'a.b.c'}}</span>
            {{/if}}
          </div>
          <div class="form-group {{afHasError 'arrayOfObjects.0.name'}}">
            {{afFieldLabel 'arrayOfObjects.0.name'}}
            {{afFieldInput 'arrayOfObjects.0.name'}}
            {{#if afFieldIsInvalid 'arrayOfObjects.0.name'}}
            <span class="help-block">{{afFieldMessage 'arrayOfObjects.0.name'}}</span>
            {{/if}}
          </div>
        </div>
        {{> buttons}}
        {{/autoForm}}
        <h2>Virtual Field Test</h2>
        {{> virtualFields}}
        <h2>Contact Form Test</h2>
        {{> contactForm}}
        <h2>Normal Submit Form</h2>
        {{> normalSubmitForm}}
        <h2>Quick Form Test</h2>
        <div class="formWrap">
          {{quickForm schema=schema validation="keyup" type="insert" id="myQuickForm" buttonContent="Insert" buttonClasses="btn btn-primary" novalidate="novalidate"}}
        </div>
        <h2>Dates Test</h2>
        {{> datesForm}}
      </div>
      <div class="col-12 col-lg-4">
        {{> docTable}}
      </div>
    </div>
  </div>
</template>

<template name="docTable">
  <table class="table table-bordered table-striped table-hover">
    <tbody>
      <tr>
        <td><button type="button" class="btn-link docClear">New Document</button></td>
        <td></td>
      </tr>
      {{#each documents}}
      <tr>
        <td><button type="button" class="btn-link docSelect">{{requiredString}}</button></td>
        <td>
          {{#autoForm schema='Documents' doc=this novalidate="novalidate"}}
          <button type="submit" class="btn btn-primary remove">Delete</button>
          {{/autoForm}}
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="buttons">
  {{#if newDocMode}}
  <button type="submit" class="btn btn-primary insert">Insert</button>
  {{else}}
  <button type="submit" class="btn btn-primary update">Update</button>
  {{/if}}
  <button type="reset" class="btn btn-default">Reset</button>
</template>

<template name="virtualFields">
  {{#autoForm schema='PersonsForm' validation="keyup" novalidate="novalidate" id="personsForm"}}
  <fieldset>
    <legend>Add a Person</legend>
    <div class="form-group {{afHasError 'firstName'}}">
      {{afFieldLabel 'firstName'}}
      {{afFieldInput 'firstName'}}
      {{#if afFieldIsInvalid 'firstName'}}
      <span class="help-block">{{afFieldMessage 'firstName'}}</span>
      {{/if}}
    </div>
    <div class="form-group {{afHasError 'lastName'}}">
      {{afFieldLabel 'lastName'}}
      {{afFieldInput 'lastName'}}
      {{#if afFieldIsInvalid 'lastName'}}
      <span class="help-block">{{afFieldMessage 'lastName'}}</span>
      {{/if}}
    </div>
  </fieldset>
  <button type="submit" class="btn btn-primary insert">Insert</button>
  {{/autoForm}}
  <table class="table table-bordered table-striped table-hover" style="margin: 25px 0;">
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Full Name (virtual)</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each persons}}
      <tr>
        <td>{{firstName}}</td>
        <td>{{lastName}}</td>
        <td>{{fullName}}</td>
        <td>
          {{#autoForm schema='PersonsForm' doc=this novalidate="novalidate"}}
          <button type="submit" class="btn btn-primary remove">Delete</button>
          {{/autoForm}}
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="contactForm">
  {{#autoForm schema="ContactForm" id="contactForm" onSubmit=onSubmit novalidate="novalidate"}}
  <fieldset>
    <legend>Contact Us</legend>
    <div class="form-group {{afHasError 'name'}}">
      {{afFieldLabel "name" class="control-label"}}
      {{afFieldInput "name"}}
      {{#if afFieldIsInvalid "name"}}
      <span class="help-block">{{afFieldMessage "name"}}</span>
      {{/if}}
    </div>
    <div class="form-group {{afHasError 'email'}}">
      {{afFieldLabel "email" class="control-label"}}
      {{afFieldInput "email"}}
      {{#if afFieldIsInvalid "email"}}
      <span class="help-block">{{afFieldMessage "email"}}</span>
      {{/if}}
    </div>
    <div class="form-group {{afHasError 'message'}}">
      {{afFieldLabel "message" class="control-label"}}
      {{afFieldInput "message" rows="10"}}
      {{#if afFieldIsInvalid "message"}}
      <span class="help-block">{{afFieldMessage "message"}}</span>
      {{/if}}
    </div>
    <div>
      <button type="submit" data-meteor-method="sendEmail" class="btn btn-primary">Submit</button>
      <button type="reset" class="btn btn-default">Reset</button>
    </div>
  </fieldset>
  {{/autoForm}}
</template>

<template name="normalSubmitForm">
  {{#autoForm schema="ContactForm" id="contactForm2" novalidate="novalidate" action="/fake" method="post"}}
  <fieldset>
    <legend>Contact Us</legend>
    {{afQuickField "name" label=false placeholder="schemaLabel"}}
    {{afQuickField "email" label=false placeholder="schemaLabel"}}
    {{afQuickField "message" label=false placeholder="schemaLabel" rows="10"}}
    <div>
      <button type="submit" class="btn btn-primary">Submit</button>
      <button type="reset" class="btn btn-default">Reset</button>
    </div>
  </fieldset>
  {{/autoForm}}
</template>

<template name="datesForm">
  {{#autoForm schema="DatesForm" doc=dateDoc id="datesForm1" novalidate="novalidate"}}
  {{afQuickField "date"}}
  <div>
    <button type="submit" class="btn btn-primary insert">Insert</button>
  </div>
  {{/autoForm}}
  {{#autoForm schema="DatesForm" doc=dateTimeDoc id="datesForm2" novalidate="novalidate"}}
  {{afQuickField "dateTime" type="datetime"}}
  <div>
    <button type="submit" class="btn btn-primary insert">Insert</button>
  </div>
  {{/autoForm}}
  {{#autoForm schema="DatesForm" doc=dateTimeLocalDoc id="datesForm3" novalidate="novalidate"}}
  {{afQuickField "dateTimeLocal" type="datetime-local" offset="-0100"}}
  <div>
    <button type="submit" class="btn btn-primary insert">Insert</button>
  </div>
  {{/autoForm}}
</template>